<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boekingssysteem - Admin</title>
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚úÇÔ∏è</text></svg>">
  <link rel="stylesheet" href="style.css">
  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Chart.js for statistics -->
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Inline script to set title immediately to prevent flash -->
  <script>
    // Hide the body until we load the correct title (when DOM is ready)
    document.addEventListener('DOMContentLoaded', function() {
      if (document.body) {
        document.body.style.visibility = 'hidden';
      }
    });
    
    // Initialize Supabase client when library is loaded
    function initSupabase() {
      if (typeof supabase !== 'undefined' && supabase.createClient) {
        window.supabase = supabase.createClient(
          "https://owrojqutbtoifitqijdi.supabase.co",
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93cm9qcXV0YnRvaWZpdHFpamRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMjQ3NjUsImV4cCI6MjA3MzcwMDc2NX0.ugj1qCdzDd_40ZqJE5pYuMarFOhLlT3ZU_8piIPt_Mc"
        );
        loadSiteTitle();
      } else {
        // Retry after a short delay
        setTimeout(initSupabase, 50);
      }
    }
    
    // Load and apply site title immediately
    function loadSiteTitle() {
      (async function() {
      try {
        const { data, error } = await window.supabase
          .from('settings')
          .select('value')
          .eq('key', 'site_title')
          .single();
        
        if (data && data.value) {
          // Update page title
          document.title = data.value + ' - Admin';
          // Update site title in header
          const siteTitleElement = document.querySelector('h1 a');
          if (siteTitleElement) {
            siteTitleElement.textContent = data.value;
          }
        }
      } catch (error) {
        console.log('Could not load site title, using default');
      } finally {
        // Show the body when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
          if (document.body) {
            document.body.style.visibility = 'visible';
          }
        });
        
        // Also try to show immediately if body already exists
        if (document.body) {
          document.body.style.visibility = 'visible';
        }
      }
    })();
    
    // Start the initialization
    initSupabase();
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1><a href="index.html" style="text-decoration: none; color: inherit;">Boekingssysteem</a> - Admin</h1>
    <button id="logoutBtn">Logout</button>
    </header>

    <!-- Tab Navigation -->
    <div class="tab-navigation">
      <button class="tab-btn active" data-tab="boekingen">üìÖ Boekingen</button>
      <button class="tab-btn" data-tab="diensten">‚úÇÔ∏è Diensten</button>
      <button class="tab-btn" data-tab="barbers">üë®‚Äçüíº Barbers</button>
      <button class="tab-btn" data-tab="klanten">üë• Klanten</button>
      <button class="tab-btn" data-tab="gebruikers">üë§ Gebruikers</button>
      <button class="tab-btn" data-tab="statistieken">üìä Statistieken</button>
      <button class="tab-btn" data-tab="instellingen">‚öôÔ∏è Instellingen</button>
      <button id="themeToggle" class="btn btn-outline">üåô</button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Boekingen Tab -->
      <div id="boekingen" class="tab-panel active">
        <div class="widget">
          <h2>Boekingen Beheer</h2>
          
          <!-- Week Navigation -->
          <div class="week-navigation">
            <button id="prevWeekBtn" class="week-nav-btn">‚Üê Vorige Week</button>
            <h3 id="currentWeekDisplay">Week van 15 sep - 21 sep 2025</h3>
            <button id="nextWeekBtn" class="week-nav-btn">Volgende Week ‚Üí</button>
          </div>
          
          
          <!-- Modern Week Calendar -->
          <div class="modern-calendar">
            <!-- Calendar Header -->
            <div class="calendar-header">
              <div class="week-info">
                <span class="week-number" id="weekNumber">W 38</span>
                <span class="week-dates" id="weekDates">15-21 Sep 2025</span>
              </div>
            </div>
            
            <!-- Days Header -->
            <div class="days-header">
              <div class="time-header">Tijd</div>
              <div class="day-header" data-day="monday">
                <div class="day-name">Maandag</div>
                <div class="day-date" id="mondayDate">15 Sep</div>
              </div>
              <div class="day-header" data-day="tuesday">
                <div class="day-name">Dinsdag</div>
                <div class="day-date" id="tuesdayDate">16 Sep</div>
              </div>
              <div class="day-header" data-day="wednesday">
                <div class="day-name">Woensdag</div>
                <div class="day-date" id="wednesdayDate">17 Sep</div>
              </div>
              <div class="day-header" data-day="thursday">
                <div class="day-name">Donderdag</div>
                <div class="day-date" id="thursdayDate">18 Sep</div>
              </div>
              <div class="day-header" data-day="friday">
                <div class="day-name">Vrijdag</div>
                <div class="day-date" id="fridayDate">19 Sep</div>
              </div>
              <div class="day-header" data-day="saturday">
                <div class="day-name">Zaterdag</div>
                <div class="day-date" id="saturdayDate">20 Sep</div>
              </div>
              <div class="day-header" data-day="sunday">
                <div class="day-name">Zondag</div>
                <div class="day-date" id="sundayDate">21 Sep</div>
              </div>
            </div>
            
            <!-- Calendar Body -->
            <div class="calendar-body">
              <div class="time-column">
                <div class="time-labels" id="timeLabels"></div>
              </div>
              <div class="days-container">
                <div class="day-column" data-day="monday">
                  <div class="day-appointments" id="appointmentsMonday"></div>
                </div>
                <div class="day-column" data-day="tuesday">
                  <div class="day-appointments" id="appointmentsTuesday"></div>
                </div>
                <div class="day-column" data-day="wednesday">
                  <div class="day-appointments" id="appointmentsWednesday"></div>
                </div>
                <div class="day-column" data-day="thursday">
                  <div class="day-appointments" id="appointmentsThursday"></div>
                </div>
                <div class="day-column" data-day="friday">
                  <div class="day-appointments" id="appointmentsFriday"></div>
                </div>
                <div class="day-column" data-day="saturday">
                  <div class="day-appointments" id="appointmentsSaturday"></div>
                </div>
                <div class="day-column" data-day="sunday">
                  <div class="day-appointments" id="appointmentsSunday"></div>
                </div>
              </div>
              
              <!-- Current Time Line -->
              <div class="current-time-line" id="currentTimeLine"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Appointment Details Popup -->
      <div id="appointmentDetailsPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
          <div class="popup-header">
            <h3>Afspraak Details</h3>
            <button id="closeAppointmentPopup" class="close-btn">&times;</button>
          </div>
          <div class="popup-body">
            <div class="appointment-details">
              <div class="detail-section">
                <h4>Klant Informatie</h4>
                <div class="detail-item">
                  <span class="label">Naam:</span>
                  <span class="value" id="appointmentCustomerName">-</span>
                </div>
                <div class="detail-item">
                  <span class="label">Email:</span>
                  <span class="value" id="appointmentCustomerEmail">-</span>
                </div>
                <div class="detail-item">
                  <span class="label">Telefoon:</span>
                  <span class="value" id="appointmentCustomerPhone">-</span>
                </div>
              </div>
              
              <div class="detail-section">
                <h4>Afspraak Informatie</h4>
                <div class="detail-item">
                  <span class="label">Datum:</span>
                  <span class="value" id="appointmentDate">-</span>
                </div>
                <div class="detail-item">
                  <span class="label">Tijd:</span>
                  <span class="value" id="appointmentTime">-</span>
                </div>
                <div class="detail-item">
                  <span class="label">Barber:</span>
                  <span class="value" id="appointmentBarber">-</span>
                </div>
                <div class="detail-item">
                  <span class="label">Dienst:</span>
                  <span class="value" id="appointmentService">-</span>
                </div>
                <div class="detail-item">
                  <span class="label">Prijs:</span>
                  <span class="value" id="appointmentPrice">-</span>
                </div>
              </div>
            </div>
          </div>
          <div class="popup-footer">
            <button id="editAppointmentBtn" class="btn-edit">Wijzigen</button>
            <button id="deleteAppointmentBtn" class="btn-danger">Verwijderen</button>
            <button id="closeAppointmentDetailsBtn" class="btn-cancel">Sluiten</button>
          </div>
          
          <!-- Edit Form (hidden by default) -->
          <div id="editAppointmentForm" class="edit-form" style="display: none;">
            <h3>Afspraak Wijzigen</h3>
            <div class="form-group">
              <label for="editCustomerName">Klantnaam:</label>
              <input type="text" id="editCustomerName" class="form-input">
            </div>
            <div class="form-group">
              <label for="editCustomerEmail">Email:</label>
              <input type="email" id="editCustomerEmail" class="form-input">
            </div>
            <div class="form-group">
              <label for="editCustomerPhone">Telefoon:</label>
              <input type="tel" id="editCustomerPhone" class="form-input">
            </div>
            <div class="form-group">
              <label for="editAppointmentDate">Datum:</label>
              <input type="date" id="editAppointmentDate" class="form-input">
            </div>
            <div class="form-group">
              <label for="editAppointmentTime">Tijd:</label>
              <input type="time" id="editAppointmentTime" class="form-input">
            </div>
            <div class="form-group">
              <label for="editAppointmentBarber">Barber:</label>
              <select id="editAppointmentBarber" class="form-input">
                <option value="">Kies een barber...</option>
              </select>
            </div>
            <div class="form-group">
              <label for="editAppointmentService">Dienst:</label>
              <select id="editAppointmentService" class="form-input">
                <option value="">Kies een dienst...</option>
              </select>
            </div>
            <div class="edit-form-actions">
              <button id="saveAppointmentBtn" class="btn btn-primary">Opslaan</button>
              <button id="cancelEditBtn" class="btn btn-secondary">Annuleren</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Diensten Tab -->
      <div id="diensten" class="tab-panel">
        <div class="widget">
          <h2>Diensten Beheer</h2>
          <div class="add-row">
            <div style="flex:1;">
              <input type="text" id="newDienstName" placeholder="Nieuwe dienst naam">
            </div>
            <div style="flex:1;">
              <input type="number" id="newDienstPrice" placeholder="Prijs (‚Ç¨)" min="0" step="0.01">
            </div>
            <div style="flex:1;">
              <input type="number" id="newDienstDuration" placeholder="Duur (min)" min="5" max="300" value="30">
            </div>
            <div>
    <button id="addDienstBtn">Toevoegen</button>
            </div>
          </div>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Naam</th>
                <th>Prijs</th>
                <th>Duur</th>
          <th>Actie</th>
        </tr>
      </thead>
      <tbody id="dienstenBody"></tbody>
    </table>
        </div>
      </div>

      <!-- Barbers Tab -->
      <div id="barbers" class="tab-panel">
        <div class="widget">
          <h2>Barbers Beheer</h2>
          
          <!-- Barber Sub-tabs -->
          <div class="sub-tab-navigation">
            <button class="sub-tab-btn active" data-subtab="manage">Barbers Beheren</button>
            <button class="sub-tab-btn" data-subtab="availability">Beschikbaarheid Instellen</button>
          </div>
          
          <!-- Manage Barbers Sub-tab -->
          <div id="manage-barbers" class="sub-tab-panel active">
            <div class="add-row">
              <div style="flex:1;">
                <input type="text" id="newBarberName" placeholder="Nieuwe barber naam">
              </div>
              <div>
    <button id="addBarberBtn">Toevoegen</button>
              </div>
            </div>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Naam</th>
          <th>Actie</th>
        </tr>
      </thead>
      <tbody id="barbersBody"></tbody>
    </table>
          </div>
          
          <!-- Barber Availability Sub-tab -->
          <div id="availability-barbers" class="sub-tab-panel">
            <div class="barber-selector">
              <label for="barberAvailabilitySelect">Selecteer Barber:</label>
              <select id="barberAvailabilitySelect">
                <option value="">Kies een barber...</option>
              </select>
            </div>
            
            <div id="barberAvailabilityContent" style="display: none;">
              <h3>Beschikbaarheid Instellen</h3>
              
              <!-- Days of the week -->
              <div class="availability-days">
                <h4>Beschikbare Dagen</h4>
                <div class="days-grid">
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="monday">
                    <span>Maandag</span>
                  </label>
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="tuesday">
                    <span>Dinsdag</span>
                  </label>
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="wednesday">
                    <span>Woensdag</span>
                  </label>
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="thursday">
                    <span>Donderdag</span>
                  </label>
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="friday">
                    <span>Vrijdag</span>
                  </label>
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="saturday">
                    <span>Zaterdag</span>
                  </label>
                  <label class="day-checkbox">
                    <input type="checkbox" data-day="sunday">
                    <span>Zondag</span>
                  </label>
                </div>
              </div>
              
              <!-- Working hours -->
              <div class="availability-hours">
                <h4>Werkuren per Dag</h4>
                <div class="hours-grid">
                  <div class="day-hours" data-day="monday" style="display: none;">
                    <h5>Maandag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="monday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="monday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                  <div class="day-hours" data-day="tuesday" style="display: none;">
                    <h5>Dinsdag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="tuesday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="tuesday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                  <div class="day-hours" data-day="wednesday" style="display: none;">
                    <h5>Woensdag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="wednesday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="wednesday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                  <div class="day-hours" data-day="thursday" style="display: none;">
                    <h5>Donderdag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="thursday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="thursday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                  <div class="day-hours" data-day="friday" style="display: none;">
                    <h5>Vrijdag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="friday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="friday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                  <div class="day-hours" data-day="saturday" style="display: none;">
                    <h5>Zaterdag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="saturday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="saturday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                  <div class="day-hours" data-day="sunday" style="display: none;">
                    <h5>Zondag</h5>
                    <div class="time-inputs">
                      <label>
                        Start tijd:
                        <input type="time" data-day="sunday" data-type="start" value="09:00">
                      </label>
                      <label>
                        Eind tijd:
                        <input type="time" data-day="sunday" data-type="end" value="17:00">
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="availability-actions">
                <button id="saveAvailabilityBtn">Beschikbaarheid Opslaan</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Statistieken Tab -->
      <div id="statistieken" class="tab-panel">
        <div class="widget">
          <h2>üìä Bedrijfsstatistieken</h2>
          
          <!-- Date Range Selector -->
          <div class="stats-controls">
            <div class="date-range-selector">
              <label for="statsDateRange">Periode:</label>
              <select id="statsDateRange">
                <option value="7">Laatste 7 dagen</option>
                <option value="30" selected>Laatste 30 dagen</option>
                <option value="90">Laatste 3 maanden</option>
                <option value="365">Laatste jaar</option>
              </select>
            </div>
            <button id="refreshStats" class="btn btn-primary">üîÑ Vernieuwen</button>
          </div>

          <!-- Statistics Cards -->
          <div class="stats-grid">
            <!-- Revenue Overview -->
            <div class="stats-card revenue-card">
              <div class="stats-header">
                <h3>üí∞ Totale Omzet</h3>
                <span class="stats-icon">üí∏</span>
              </div>
              <div class="stats-value" id="totalRevenue">‚Ç¨0</div>
              <div class="stats-change" id="revenueChange">+0%</div>
            </div>

            <!-- Total Appointments -->
            <div class="stats-card appointments-card">
              <div class="stats-header">
                <h3>üìÖ Totaal Afspraken</h3>
                <span class="stats-icon">üìã</span>
              </div>
              <div class="stats-value" id="totalAppointments">0</div>
              <div class="stats-change" id="appointmentsChange">+0%</div>
            </div>

            <!-- Average Revenue per Appointment -->
            <div class="stats-card avg-revenue-card">
              <div class="stats-header">
                <h3>üìà Gem. Omzet per Afspraak</h3>
                <span class="stats-icon">üíé</span>
              </div>
              <div class="stats-value" id="avgRevenuePerAppointment">‚Ç¨0</div>
              <div class="stats-change" id="avgRevenueChange">+0%</div>
            </div>

            <!-- Busiest Day -->
            <div class="stats-card busiest-day-card">
              <div class="stats-header">
                <h3>üî• Drukste Dag</h3>
                <span class="stats-icon">‚ö°</span>
              </div>
              <div class="stats-value" id="busiestDay">-</div>
              <div class="stats-change" id="busiestDayCount">0 afspraken</div>
            </div>
          </div>

          <!-- Revenue per Barber -->
          <div class="stats-section">
            <h3>üíº Omzet per Barber</h3>
            <div class="barber-revenue-grid" id="barberRevenueGrid">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>

          <!-- Popular Services -->
          <div class="stats-section">
            <h3>‚úÇÔ∏è Populairste Diensten</h3>
            <div class="services-stats-grid" id="servicesStatsGrid">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>

          <!-- Daily Revenue Chart -->
          <div class="stats-section">
            <h3>üìä Omzet per Dag</h3>
            <div class="chart-container">
              <canvas id="dailyRevenueChart" width="800" height="400"></canvas>
            </div>
          </div>

          <!-- Weekly Trends -->
          <div class="stats-section">
            <h3>üìà Wekelijkse Trends</h3>
            <div class="trends-grid">
              <div class="trend-card">
                <h4>üìÖ Deze Week</h4>
                <div class="trend-value" id="thisWeekRevenue">‚Ç¨0</div>
                <div class="trend-comparison" id="thisWeekComparison">-</div>
              </div>
              <div class="trend-card">
                <h4>üìÖ Vorige Week</h4>
                <div class="trend-value" id="lastWeekRevenue">‚Ç¨0</div>
                <div class="trend-comparison" id="lastWeekComparison">-</div>
              </div>
              <div class="trend-card">
                <h4>üìÖ Deze Maand</h4>
                <div class="trend-value" id="thisMonthRevenue">‚Ç¨0</div>
                <div class="trend-comparison" id="thisMonthComparison">-</div>
              </div>
            </div>
          </div>

          <!-- Customer Insights -->
          <div class="stats-section">
            <h3>üë• Klant Insights</h3>
            <div class="customer-insights-grid">
              <div class="insight-card">
                <h4>üÜï Nieuwe Klanten</h4>
                <div class="insight-value" id="newCustomers">0</div>
                <div class="insight-period">Deze periode</div>
              </div>
              <div class="insight-card">
                <h4>üîÑ Terugkerende Klanten</h4>
                <div class="insight-value" id="returningCustomers">0</div>
                <div class="insight-period">Percentage</div>
              </div>
              <div class="insight-card">
                <h4>‚≠ê Gem. Afspraken per Klant</h4>
                <div class="insight-value" id="avgAppointmentsPerCustomer">0</div>
                <div class="insight-period">Deze periode</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Klanten Tab -->
      <div id="klanten" class="tab-panel">
        <div class="widget">
          <h2>Klant Management</h2>
          
          <!-- Sub-tab Navigation for Klanten -->
          <div class="sub-tab-navigation" style="margin-bottom: 20px;">
            <button class="sub-tab-btn active" data-subtab="klanten-overzicht">üë• Overzicht</button>
            <button class="sub-tab-btn" data-subtab="klanten-importeren">üì• Importeren</button>
          </div>
          
          <!-- Klanten Overzicht Sub-tab -->
          <div id="klanten-overzicht" class="sub-tab-panel active">
            <!-- Search and Filter Section -->
            <div class="search-section">
              <div class="search-bar">
                <input type="text" id="customerSearch" placeholder="Zoek klanten op naam of email...">
                <button id="searchBtn">üîç</button>
              </div>
              <div class="filter-options">
                <select id="statusFilter">
                  <option value="all">Alle klanten</option>
                  <option value="active">Actieve klanten</option>
                  <option value="inactive">Inactieve klanten</option>
                </select>
              </div>
            </div>
            
            <!-- Customer List -->
            <div class="customer-list" id="customerList">
              <!-- Customers will be loaded here -->
            </div>
          </div>
          
          <!-- Klanten Importeren Sub-tab -->
          <div id="klanten-importeren" class="sub-tab-panel">
            <div class="import-section">
            <h3>üì• Klanten Importeren</h3>
            <div class="import-container">
              <div class="import-instructions">
                <h4>üìã Hoe te importeren:</h4>
                <ol>
                  <li>Download je klanten data als <strong>CSV bestand</strong></li>
                  <li>Zorg dat de kolommen bevatten: <code>naam, email, telefoon</code></li>
                  <li>Upload het CSV bestand hieronder</li>
                  <li>Controleer de preview en pas mapping aan indien nodig</li>
                  <li>Klik "Importeren" om de klanten toe te voegen</li>
                </ol>
                
                <div class="csv-example">
                  <h5>üìÑ Voorbeeld CSV format:</h5>
                  <pre>naam,email,telefoon
Jan Janssen,jan@email.com,0612345678
Piet Pietersen,piet@email.com,0687654321</pre>
                </div>
              </div>
              
              <div class="import-upload">
                <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                <button id="selectCsvFile" class="btn btn-primary">
                  üìÅ Selecteer CSV Bestand
                </button>
                <span id="selectedFileName" class="file-name"></span>
                
                <div class="test-data-section">
                  <hr style="margin: 20px 0; border: 1px solid var(--border-color);">
                  <h5>üß™ Test Data</h5>
                  <p style="color: var(--text-secondary); font-size: 14px; margin: 10px 0;">
                    Klik hieronder om 25 test klanten met random gegevens aan te maken voor demo doeleinden.
                  </p>
                  <button id="importTestCustomers" class="btn btn-secondary">
                    üé≤ Genereer 25 Test Klanten
                  </button>
                </div>
              </div>
              
              <div class="import-preview" id="importPreview" style="display: none;">
                <h4>üëÄ Preview van ge√Ømporteerde data:</h4>
                <div class="preview-table-container">
                  <table class="preview-table" id="previewTable">
                    <thead id="previewTableHead"></thead>
                    <tbody id="previewTableBody"></tbody>
                  </table>
                </div>
                
                <div class="import-mapping">
                  <h5>üó∫Ô∏è Kolom Mapping:</h5>
                  <div class="mapping-controls" id="mappingControls"></div>
                </div>
                
                <div class="import-actions">
                  <button id="confirmImport" class="btn btn-success" disabled>
                    ‚úÖ Importeren (<span id="importCount">0</span> klanten)
                  </button>
                  <button id="cancelImport" class="btn btn-secondary">
                    ‚ùå Annuleren
                  </button>
                </div>
              </div>
              
              <div class="import-progress" id="importProgress" style="display: none;">
                <h4>‚è≥ Bezig met importeren...</h4>
                <div class="progress-bar">
                  <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0 van 0 klanten ge√Ømporteerd</div>
              </div>
              
              <div class="import-results" id="importResults" style="display: none;">
                <h4>üìä Import Resultaten:</h4>
                <div class="results-summary" id="resultsSummary"></div>
                <div class="results-details" id="resultsDetails"></div>
              </div>
            </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Gebruikers Tab -->
      <div id="gebruikers" class="tab-panel">
        <div class="widget">
          <h2>üë§ Gebruikers Beheer</h2>
          
          <!-- Add User Section -->
          <div class="add-user-section" style="margin-bottom: 30px; padding: 20px; background: var(--surface); border: 1px solid var(--border-color); border-radius: 8px;">
            <h3>‚ûï Nieuwe Gebruiker Toevoegen</h3>
            <div class="add-row">
              <div style="flex:1;">
                <label for="newUserEmail">E-mailadres</label>
                <input type="email" id="newUserEmail" placeholder="gebruiker@example.com">
              </div>
              <div style="flex:1;">
                <label for="newUserPassword">Wachtwoord</label>
                <input type="password" id="newUserPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
              </div>
              <div style="flex:1;">
                <label for="newUserRole">Rol</label>
                <select id="newUserRole">
                  <option value="admin">üîë Administrator</option>
                  <option value="manager">üë®‚Äçüíº Manager</option>
                  <option value="staff">üë§ Medewerker</option>
                  <option value="viewer">üëÅÔ∏è Bekijker</option>
                </select>
              </div>
              <div style="align-self: flex-end;">
                <button id="addUserBtn" class="btn btn-primary">Toevoegen</button>
              </div>
            </div>
          </div>

          <!-- Permissions Section -->
          <div class="permissions-section" style="margin-bottom: 30px; padding: 20px; background: var(--surface); border: 1px solid var(--border-color); border-radius: 8px;">
            <h3>üîê Rollen & Rechten</h3>
            <div class="roles-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
              <div class="role-card" style="padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
                <h4>üîë Administrator</h4>
                <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                  <li>Alle rechten</li>
                  <li>Gebruikers beheren</li>
                  <li>Instellingen wijzigen</li>
                  <li>Systeem configuratie</li>
                </ul>
              </div>
              <div class="role-card" style="padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
                <h4>üë®‚Äçüíº Manager</h4>
                <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                  <li>Afspraken beheren</li>
                  <li>Klanten beheren</li>
                  <li>Barbers beheren</li>
                  <li>Statistieken bekijken</li>
                </ul>
              </div>
              <div class="role-card" style="padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
                <h4>üë§ Medewerker</h4>
                <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                  <li>Afspraken bekijken</li>
                  <li>Afspraken wijzigen</li>
                  <li>Klanten bekijken</li>
                  <li>Basis statistieken</li>
                </ul>
              </div>
              <div class="role-card" style="padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
                <h4>üëÅÔ∏è Bekijker</h4>
                <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                  <li>Alleen bekijken</li>
                  <li>Geen wijzigingen</li>
                  <li>Statistieken bekijken</li>
                  <li>Beperkte toegang</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Users List -->
          <div class="users-list-section">
            <h3>üìã Huidige Gebruikers</h3>
            <div class="search-section" style="margin-bottom: 20px;">
              <div class="search-bar">
                <input type="text" id="userSearch" placeholder="Zoek gebruikers op email...">
                <button id="searchUserBtn">üîç</button>
              </div>
              <div class="filter-options">
                <select id="roleFilter">
                  <option value="all">Alle rollen</option>
                  <option value="admin">Administrator</option>
                  <option value="manager">Manager</option>
                  <option value="staff">Medewerker</option>
                  <option value="viewer">Bekijker</option>
                </select>
              </div>
            </div>
            
            <div class="users-list" id="usersList">
              <!-- Users will be loaded here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Instellingen Tab -->
      <div id="instellingen" class="tab-panel">
        <div class="widget">
          <h2>Systeem Instellingen</h2>
          
          <div class="settings-container">
            <div class="settings-section">
              <h3>üèÜ Loyaliteitsprogramma</h3>
              <div class="setting-item">
                <div class="setting-info">
                  <label for="loyaltyEnabled">Loyaliteitsprogramma inschakelen</label>
                  <p class="setting-description">Klanten krijgen punten voor afspraken en kunnen korting verdienen</p>
                </div>
                <div class="setting-control">
                  <label class="toggle-switch">
                    <input type="checkbox" id="loyaltyEnabled">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="pointsPerAppointment">Punten per afspraak</label>
                  <p class="setting-description">Aantal punten dat klanten krijgen voor elke afspraak</p>
                </div>
                <div class="setting-control">
                  <input type="number" id="pointsPerAppointment" min="1" max="100" value="25">
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="pointsForDiscount">Punten voor korting</label>
                  <p class="setting-description">Aantal punten nodig om korting te krijgen</p>
                </div>
                <div class="setting-control">
                  <input type="number" id="pointsForDiscount" min="1" max="1000" value="100">
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="discountPercentage">Korting percentage</label>
                  <p class="setting-description">Percentage korting dat klanten krijgen</p>
                </div>
                <div class="setting-control">
                  <input type="number" id="discountPercentage" min="1" max="100" value="50">
                  <span class="percentage-symbol">%</span>
                </div>
              </div>
            </div>
            
            <!-- Theme Settings Section -->
            <div class="settings-section">
              <h3>üé® Thema & Kleuren</h3>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="darkModeEnabled">Dark Mode inschakelen</label>
                  <p class="setting-description">Sta gebruikers toe om tussen light en dark mode te schakelen</p>
                </div>
                <div class="setting-control">
                  <label class="toggle-switch">
                    <input type="checkbox" id="darkModeEnabled">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="primaryColor">Primaire kleur</label>
                  <p class="setting-description">De hoofdkleur van de website (knoppen, accenten)</p>
                </div>
                <div class="setting-control">
                  <input type="color" id="primaryColor" value="#F28B82">
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="secondaryColor">Secundaire kleur</label>
                  <p class="setting-description">Kleur voor hover effecten en secundaire elementen</p>
                </div>
                <div class="setting-control">
                  <input type="color" id="secondaryColor" value="#e67e73">
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="backgroundColor">Achtergrond kleur</label>
                  <p class="setting-description">Basis achtergrond kleur van de website</p>
                </div>
                <div class="setting-control">
                  <input type="color" id="backgroundColor" value="#f8f9fa">
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="textColor">Tekst kleur</label>
                  <p class="setting-description">Basis tekst kleur van de website</p>
                </div>
                <div class="setting-control">
                  <input type="color" id="textColor" value="#333333">
                </div>
              </div>
            </div>
            
            <!-- Display Settings Section -->
            <div class="settings-section">
              <h3>üì± Weergave</h3>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="siteTitle">Website titel</label>
                  <p class="setting-description">De naam die bovenaan de website wordt getoond</p>
                </div>
                <div class="setting-control">
                  <input type="text" id="siteTitle" value="Boekingssysteem" placeholder="Website titel">
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="timeSlotInterval">Tijdslot interval</label>
                  <p class="setting-description">Interval tussen beschikbare tijdsloten (in minuten)</p>
                </div>
                <div class="setting-control">
                  <select id="timeSlotInterval">
                    <option value="15">15 minuten</option>
                    <option value="30">30 minuten</option>
                    <option value="60">60 minuten</option>
                  </select>
                </div>
              </div>
              
              <div class="setting-item">
                <div class="setting-info">
                  <label for="maxAdvanceBooking">Maximale vooruitboeking</label>
                  <p class="setting-description">Hoeveel dagen vooruit klanten kunnen boeken</p>
                </div>
                <div class="setting-control">
                  <input type="number" id="maxAdvanceBooking" min="1" max="365" value="30">
                  <span class="unit-symbol">dagen</span>
                </div>
              </div>
            </div>
            
            <div class="settings-actions">
              <button id="saveSettings" class="btn btn-primary">üíæ Instellingen Opslaan</button>
              <button id="resetSettings" class="btn btn-secondary">üîÑ Reset naar Standaard</button>
              <button id="previewTheme" class="btn btn-outline">üëÅÔ∏è Thema Voorbeeld</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Supabase client initialisatie -->
  <script>
    window.supabase = supabase.createClient(
      "https://owrojqutbtoifitqijdi.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93cm9qcXV0YnRvaWZpdHFpamRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMjQ3NjUsImV4cCI6MjA3MzcwMDc2NX0.ugj1qCdzDd_40ZqJE5pYuMarFOhLlT3ZU_8piIPt_Mc"
    );
  </script>

  <!-- Admin functionaliteiten -->
  <script src="admin.js"></script>
</body>
</html>
